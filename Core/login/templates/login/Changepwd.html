{% extends 'login/Login.html'%}
{% load static %}
{% block content%}
	<div class="login-box">
		<div class="login-logo">
			<a href="{% url 'app:index' %}" class="h1"><b>SAGS</b>Portuguesa</a>
		</div>
		<div class="card card-outline card-success">
			<div class="card-body">
				<p class="login-box-msg">Cambio de contraseña</p>
				<form action="#" method="post">
		  			<input type="hidden" name="next" value=" {{ next }} " >
		  			{% csrf_token %}
			   		<div class="input-group mb-3">
						{{ form.password }}
			      		<div class="input-group-append">
			        		<div class="input-group-text">
			         			<span class="fas fa-lock"></span>
			        		</div>
			      		</div>
		    		</div>
		    		<div class="input-group mb-3">
						{{ form.confirmarPassword }}
			      		<div class="input-group-append">
			        		<div class="input-group-text">
			         			<span class="fas fa-lock"></span>
			        		</div>
			      		</div>
		    		</div>
			    	<div class="row">
			    		<div class="col-12">
			    			<button type="submit" class="btn btn-success btn-block">
			    				<i class="fa fa-paper-plane" aria-hidden="true"></i> Cambiar contraseña
			    			</button>
			    		</div>
			    	</div>
			    </form>
			    <p class="mt-3 mb-1">
			    	<a href="{{ login_url }}"> Login</a>
			    </p>
			</div>
		</div>
    </div>
    <script type="application/javascript">
		$(function () {
			$('form').on('submit', function (e) {
				e.preventDefault();
				//var parameters = new FormData(this);

				var parameters = $(this).serializeArray();

				submit_with_ajax(window.location.pathname, 'Notificación', '¿Estas seguro de cambiar tu contraseña?', parameters,function () {
						Swal.fire({
							title: 'Notificación',
							text: 'Tu contraseña ha sido cambiada exitoxamente',
							icon: 'success',
							timer: 5000,
							onClose: () => {
								location.href = '{{ login_url }}' ;
							}
						}).then((result) => {

						})
				});
			});
		});
	</script>  
{% endblock %}